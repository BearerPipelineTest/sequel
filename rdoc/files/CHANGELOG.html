<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>CHANGELOG</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>CHANGELOG
</h1>
<div class='paths'>
CHANGELOG
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2020-02-28 09:27:25 -0800</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h3 id="label-5.30.0+-282020-03-01-29">5.30.0 (2020-03-01)<span><a href="#label-5.30.0+-282020-03-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Remove specs and old release notes from the gem to reduce gem size by over 40% (jeremyevans)</p>
</li><li>
<p>When using Database#transaction :retry_on, call :before_retry option if retrying even if :num_retries is nil (jcmfernandes) (#1678)</p>
</li><li>
<p>Support generated columns on SQLite 3.31+ using :generated_always_as and :generated_type options (jeremyevans)</p>
</li></ul>

<h3 id="label-5.29.0+-282020-02-01-29">5.29.0 (2020-02-01)<span><a href="#label-5.29.0+-282020-02-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Recognize another disconnect error in the tinytds adapter (jeremyevans)</p>
</li><li>
<p>Fix verbose warning in postgres adapter when using prepared statements and recent versions of ruby-pg (jeremyevans)</p>
</li><li>
<p>Work correctly on Ruby 2.8+ by supporting second argument for initialize_clone (jeremyevans)</p>
</li><li>
<p>Add empty_failure_backtraces plugin for empty backtraces for ValidationFailed and HookFailed exceptions, much faster on JRuby (jeremyevans)</p>
</li><li>
<p>Add Dataset#json_serializer_opts to json_serializer plugin, allowing to set json_serializer options on a per-dataset basis (jeremyevans)</p>
</li></ul>

<h3 id="label-5.28.0+-282020-01-01-29">5.28.0 (2020-01-01)<span><a href="#label-5.28.0+-282020-01-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Warn when calling Sequel::JDBC::Postgres::Dataset#with_fetch_size (jeremyevans) (#1665)</p>
</li><li>
<p>Add exclude_or_null extension, for filtering datasets where the condition is false or NULL (jeremyevans)</p>
</li><li>
<p>Add any_not_empty extension, for making Dataset#any? without a block mean !empty? (jeremyevans)</p>
</li></ul>

<h3 id="label-5.27.0+-282019-12-01-29">5.27.0 (2019-12-01)<span><a href="#label-5.27.0+-282019-12-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Add Sequel::DEFAULT for a DEFAULT expression, useful for assigning to default values (jeremyevans)</p>
</li><li>
<p>Make Postgres::ArrayOp#join in pg_array_ops extension work correctly on PostgreSQL &lt;9.1 (jeremyevans)</p>
</li><li>
<p>Make pg_enum extension work correctly on PostgreSQL 8.3-9.0 (jeremyevans)</p>
</li><li>
<p>Emulate FILTER clause for aggregate functions using CASE on databases not supporting it directly (jeremyevans)</p>
</li><li>
<p>Support ordering by NULLS FIRST/NULLS LAST without emulation on SQLite 3.30+ (jeremyevans)</p>
</li></ul>

<h3 id="label-5.26.0+-282019-11-01-29">5.26.0 (2019-11-01)<span><a href="#label-5.26.0+-282019-11-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Recognize two additional foreign key constraint violation codes on MySQL 8.0.13+ (rianmcguire) (#1657)</p>
</li><li>
<p>Support table aliases for single-table INSERT statements on PostgreSQL 9.5+ (jeremyevans) (#1656)</p>
</li><li>
<p>Implement Sequel::Postgres::PGRange#hash so instances work correctly in hashes (jeremyevans) (#1648)</p>
</li><li>
<p>Make dirty plugin work correctly with typecast_on_load plugin (jeremyevans) (#1647)</p>
</li><li>
<p>Add support for :require_modification option when setting up nested_attributes (jeremyevans)</p>
</li><li>
<p>Add support for SQL/JSON path expressions to the pg_json_ops extension, supported by PostgreSQL 12+ (jeremyevans)</p>
</li></ul>

<h3 id="label-5.25.0+-282019-10-01-29">5.25.0 (2019-10-01)<span><a href="#label-5.25.0+-282019-10-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Fix <a href="../classes/Sequel/SQL/NumericMethods.html#method-i-coerce"><code>Sequel::SQL::NumericMethods#coerce</code></a> to not raise NoMethodError if super method is not defined (jeremyevans) (#1645)</p>
</li><li>
<p>Allow setting a default for a column that already has a default on Microsoft SQL Server (jeremyevans)</p>
</li><li>
<p>Fix keyword argument separation warnings on Ruby master branch in csv_serializer plugin (jeremyevans)</p>
</li><li>
<p>Add association_multi_add_remove plugin for adding/removing multiple associated objects in a single method call (AlexWayfer, jeremyevans) (#1641, #1643)</p>
</li><li>
<p>Make sharding plugin integrate with server_block extension (jeremyevans)</p>
</li></ul>

<h3 id="label-5.24.0+-282019-09-01-29">5.24.0 (2019-09-01)<span><a href="#label-5.24.0+-282019-09-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Add Database#skip_logging? private method designed for extensions to force query timing even if no logger is present (adam12) (#1640)</p>
</li><li>
<p>Allow a hostname specified in a defaults_file in the mysql2 adapter, by not explicitly setting :host (sapio-bdeamer) (#1638)</p>
</li><li>
<p>Convert all database array types to Ruby arrays in the jdbc adapter (jeremyevans)</p>
</li><li>
<p>Add static_cache_cache plugin for caching rows for static_cache models to a file to avoid database queries during model initialization (jeremyevans)</p>
</li><li>
<p>Add :cache_file plugin option to pg_auto_constraint_validations plugin, for caching metadata to a file for faster initialization (jeremyevans)</p>
</li><li>
<p>Support :unique_deferrable and :primary_key_deferrable column options (jeremyevans)</p>
</li><li>
<p>Support :generated_always_as column option on PostgreSQL 12+ (jeremyevans)</p>
</li></ul>

<h3 id="label-5.23.0+-282019-08-01-29">5.23.0 (2019-08-01)<span><a href="#label-5.23.0+-282019-08-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Work around a bug on jdbc-sqlite3 3.27.2.1 when parsing schema for tables with columns with default values (jeremyevans)</p>
</li><li>
<p>Work around a bug in jdbc-sqlite3 3.27.2.1 when in Database#foreign_key_list in the jdbc/sqlite3 adapter (jeremyevans)</p>
</li><li>
<p>Make Dataset#execute* private methods respect explicit servers option, fixing Dataset#paged_each in the postgres adapter when sharding (jeremyevans) (#1632)</p>
</li><li>
<p>Handle instances of subclasses of core classes when wrapping objects in the pg_json extension (jeremyevans) (#1631)</p>
</li><li>
<p>Support :ansi Database option in the tinytds adapter (kenaniah) (#1629)</p>
</li><li>
<p>Support cross-database and linked servers when parsing schema on Microsoft SQL Server (kenaniah) (#1629)</p>
</li><li>
<p>Add insert_conflict plugin for automatically handling unique constraint conflicts when saving new model instances on PostgreSQL 9.5+ and SQLite 3.24.0+ (jeremyevans)</p>
</li><li>
<p>Avoid errors when parsing schema in the mock sqlite adapter (jeremyevans)</p>
</li><li>
<p>Avoid possible thread-safety issue in the timezones support (jeremyevans)</p>
</li><li>
<p>Handle offsets when typecasting an array or hash to datetime when <a href="../classes/Sequel.html#attribute-c-datetime_class"><code>Sequel.datetime_class</code></a> = Time (jeremyevans)</p>
</li><li>
<p>Support <a href="../classes/Sequel.html#attribute-c-datetime_class"><code>Sequel.datetime_class</code></a> = Time when using the named_timezones extension (jeremyevans)</p>
</li></ul>

<h3 id="label-5.22.0+-282019-07-01-29">5.22.0 (2019-07-01)<span><a href="#label-5.22.0+-282019-07-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Fix Dataset#multi_insert and import with return: :primary_key on MSSQL when the dataset has a row_proc (jeremyevans) (#1627)</p>
</li><li>
<p>Support Dataset#with :materialized option on PostgreSQL 12 for [NOT] MATERIALIZED (jeremyevans)</p>
</li><li>
<p>Make Database#primary_key_sequence work on tables without serial sequences on PostgreSQL 12 (jeremyevans)</p>
</li><li>
<p>Support ruby 2.7+ startless ranges in the pg_range extension (jeremyevans)</p>
</li><li>
<p>Support ruby 2.7+ startless, endless ranges in filters, using an always true condition for them (jeremyevans)</p>
</li><li>
<p>Support ruby 2.7+ startless ranges in filters, using just a &lt;= or &lt; operator for them (jeremyevans)</p>
</li></ul>

<h3 id="label-5.21.0+-282019-06-01-29">5.21.0 (2019-06-01)<span><a href="#label-5.21.0+-282019-06-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Recognize additional DatabaseLockTimeout errors in mysql and mysql2 adapters (jeremyevans)</p>
</li><li>
<p>Disallow eager_graph of ancestors and descendants associations when using the rcte_tree plugin (jeremyevans)</p>
</li><li>
<p>Make jdbc/mysql adapter work when using JRuby with Java 11 (jeremyevans)</p>
</li><li>
<p>Support window function options :window, :exclude, and :frame :type=&gt;:groups, :start, and :end on SQLite 3.28.0+ (jeremyevans)</p>
</li><li>
<p>Make the server_block extension respect the :servers_hash Database option (jeremyevans)</p>
</li><li>
<p>Typecast string input for json/jsonb types as JSON strings instead of parsing as JSON in the pg_json extension when Database#typecast_json_strings is set to true (jeremyevans)</p>
</li><li>
<p>Wrap JSON primitives (string, number, true, false, nil) in the pg_json extension when Database#wrap_json_primitives is set to true (jeremyevans)</p>
</li><li>
<p>Convert the Database :timeout option to an integer in the sqlite adapter (jeremyevans) (#1620)</p>
</li><li>
<p>Improve performance in ado adapter using more efficient inner loop (jeremyevans)</p>
</li><li>
<p>Improve performance in ado adapter using faster callables for type conversion (jeremyevans)</p>
</li><li>
<p>Fix handling of decimal values in the ado adapter when using locales where the decimal separator is , and not . (jeremyevans) (#1619)</p>
</li></ul>

<h3 id="label-5.20.0+-282019-05-01-29">5.20.0 (2019-05-01)<span><a href="#label-5.20.0+-282019-05-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Fix reversing of alter_table add_foreign_key when :type option is used (jeremyevans) (#1615)</p>
</li><li>
<p>Switch from using instance_exec to define_method for model associations and in some plugins (jeremyevans)</p>
</li><li>
<p>Fix Database#server_version when using mysql2 adapter with mysql driver on MariaDB 10+ database (v-kolesnikov) (#1614)</p>
</li><li>
<p>Make one_to_one setter method handle models that use joined datasets (jeremyevans) (#1612)</p>
</li><li>
<p>Make auto_validations plugin work with the class_table_inheritance plugin (jeremyevans) (#1611)</p>
</li><li>
<p>Avoid use of instance_exec for PlaceholderLiteralString#with_dataset (jeremyevans)</p>
</li><li>
<p>Recognize float unsigned database types as float (keeguon, jeremyevans) (#1609)</p>
</li><li>
<p>Support :savepoint options to Database#{after_commit,after_rollback} for making the hooks handle savepoints (jeremyevans)</p>
</li><li>
<p>Avoid use of instance_exec in association_dependencies plugin (jeremyevans)</p>
</li><li>
<p>Add pg_auto_constraint_validation_override to the pg_auto_constraint_validations plugin, for customizing columns and error message per constraint (jeremyevans)</p>
</li><li>
<p>Make Database#check_constraints on PostgreSQL also include constraints where the related columns are not known (jeremyevans)</p>
</li></ul>

<h3 id="label-5.19.0+-282019-04-02-29">5.19.0 (2019-04-02)<span><a href="#label-5.19.0+-282019-04-02-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Use more optimized approach to merging hashes in ruby 2.5+ (jeremyevans)</p>
</li><li>
<p>Use SQLite extended result codes when using ruby-sqlite3 1.4.0+ (jeremyevans)</p>
</li><li>
<p>Recognize additional SQLite extended result codes in the shared sqlite adapter (jeremyevans)</p>
</li><li>
<p>Add Database#rename_enum_value to the pg_enum extension (AlexWayfer) (#1603)</p>
</li><li>
<p>Make Database#drop_table delete constraint validations metadata for that table if using the constraint_validations extension (jeremyevans)</p>
</li><li>
<p>Speed up row fetching in the sqlite adapter (jeremyevans)</p>
</li><li>
<p>Speed up row fetching and type conversion in the sqlanywhere adapter (jeremyevans)</p>
</li></ul>

<h3 id="label-5.18.0+-282019-03-01-29">5.18.0 (2019-03-01)<span><a href="#label-5.18.0+-282019-03-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Use singleton .call methods on plain objects instead of procs/methods for faster type conversion (jeremyevans)</p>
</li><li>
<p>Add Sequel::SQL::Blob.call to avoid indirection when converting values from the database (jeremyevans)</p>
</li><li>
<p>Use while instead of each for inner loops in sqlite and jdbc adapters for better performance (jeremyevans)</p>
</li><li>
<p>Make after_initialize plugin not make the argument to Model.call optional (jeremyevans)</p>
</li><li>
<p>Allow Dataset#paged_each to be called without a block in the postgres and mysql2 adapters (jeremyevans)</p>
</li><li>
<p>Remove flow-control exceptions in connection_expiration and connection_validator extensions (jeremyevans)</p>
</li><li>
<p>Add throw_failures plugin for throwing ValidationFailed and HookFailed exceptions instead of raising them, up to 10x performance increase on JRuby (jeremyevans)</p>
</li><li>
<p>Support tzinfo 2 in addition to tzinfo 1 in the named_timezones extension (jeremyevans) (#1596)</p>
</li></ul>

<h3 id="label-5.17.0+-282019-02-01-29">5.17.0 (2019-02-01)<span><a href="#label-5.17.0+-282019-02-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Support skip_auto_validations instance method in auto_validations plugin (oldgreen, jeremyevans) (#1592)</p>
</li><li>
<p>Support :preconnect_extensions Database option for loading extensions before :preconnect option (jeremyevans)</p>
</li><li>
<p>Avoid usage of Proc.new with implicit block as ruby 2.7+ deprecates this behavior (jeremyevans)</p>
</li><li>
<p>Allow Sequel[].as to be used for constructing aliases with eager_graph (e.g. <a href=":a">Model.eager_graph(Sequel</a>.as(:b))) (jeremyevans) (#1588)</p>
</li></ul>

<h3 id="label-5.16.0+-282019-01-02-29">5.16.0 (2019-01-02)<span><a href="#label-5.16.0+-282019-01-02-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Convert integer columns to bigint columns when copying SQLite databases to other databases using bin/sequel -C (jeremyevans) (#1584)</p>
</li><li>
<p>Use nicer error messages for missing or empty migration directories (Lavode) (#1585)</p>
</li><li>
<p>Make alter table emulation work correctly in SQLite 3.26.0+ (jeremyevans) (#1582)</p>
</li><li>
<p>Do not unset new one_to_one associated objects&#39; reciprocal associations before saving associated objects in the nested_attributes plugin (jeremyevans)</p>
</li><li>
<p>Do not validate new one_to_one associated objects twice when saving in the nested_attributes plugin (jeremyevans)</p>
</li><li>
<p>Fix :qualify_tables option to class_table_inheritance plugin to work correctly with subclasses of subclasses (benalavi) (#1581)</p>
</li><li>
<p>Make class_table_inheritance plugin use the schema cache instead of sending a query to get columns for tables (kenaniah) (#1580)</p>
</li><li>
<p>Remove loading of mysqlplus in the mysql adapter (jeremyevans)</p>
</li><li>
<p>Make mysql adapter work correctly on ruby 2.6+ (jeremyevans)</p>
</li><li>
<p>Add Database#rollback_on_exit to rollback transactions instead of committing them when exiting the transaction block (jeremyevans)</p>
</li><li>
<p>Enable window functions in SQLite 3.26.0+ (jeremyevans)</p>
</li><li>
<p>Do not override existing methods when creating <a href="../classes/Sequel/Model.html"><code>Sequel::Model</code></a> attribute getter/setter methods (jeremyevans) (#1578)</p>
</li><li>
<p>Use parentheses for expressions being subscripted (e.g. (<a href="1">array_agg(column))</a>) (jeremyevans)</p>
</li></ul>

<h3 id="label-5.15.0+-282018-12-01-29">5.15.0 (2018-12-01)<span><a href="#label-5.15.0+-282018-12-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Add :conn_str option in the postgres adapter for PostgreSQL connection strings, if the pg driver is used (graywolf) (#1572)</p>
</li><li>
<p>Add :qualify_tables option to class_table_inheritance plugin to automatically qualify subclass tables with superclass qualifier (benalavi) (#1571)</p>
</li><li>
<p>Access already allocated connections in a thread safe manner when checking out connections in the sharded threaded connection pool (jeremyevans)</p>
</li><li>
<p>Automatically support datasets using qualified tables in the class_table_inheritance plugin without having to use the :alias option (benalavi) (#1565)</p>
</li><li>
<p>Support rename_column without emulation on SQLite 3.25+ (jeremyevans)</p>
</li><li>
<p>Do not remove currently cached many_to_one associated objects when changing the related foreign key value from nil to non-nil (jeremyevans)</p>
</li><li>
<p>Do not validate new *_to_many associated objects twice when saving in the nested_attributes plugin (jeremyevans)</p>
</li><li>
<p>Add Model#skip_validation_on_next_save! for skipping validation on next save call (jeremyevans)</p>
</li></ul>

<h3 id="label-5.14.0+-282018-11-01-29">5.14.0 (2018-11-01)<span><a href="#label-5.14.0+-282018-11-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Drop defaulting the :port option to 5432 in the postgres adapter, so that setting the :service option in :driver_options works (jeremyevans) (#1558)</p>
</li><li>
<p>Do not cache values for columns without parseable defaults when using :cache option in defaults_setter plugin (jeremyevans)</p>
</li><li>
<p>Emulate NULLS FIRST/LAST ordering on databases that do not natively support it (jeremyevans)</p>
</li><li>
<p>Do not modify boolean expressions created from string or array if string or array is modified (jeremyevans)</p>
</li><li>
<p>Make roots and roots_dataset dataset methods instead of class methods in the tree plugin (JelF) (#1554)</p>
</li><li>
<p>Do not cache dataset SQL if dataset uses subquery that cannot cache SQL (jeremyevans)</p>
</li><li>
<p>Make Model#=== work correctly for models with composite primary keys (jeremyevans)</p>
</li><li>
<p>Add Model#pk_equal? as a more descriptive name for Model#=== (AlexWayfer) (#1550)</p>
</li><li>
<p>Do not push down expression inversion in cases where it may result in incorrect behavior (e.g. ANY/SOME/ALL operators) (jeremyevans) (#1549)</p>
</li></ul>

<h3 id="label-5.13.0+-282018-10-01-29">5.13.0 (2018-10-01)<span><a href="#label-5.13.0+-282018-10-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Support :single_value type in prepared statements (rintaun) (#1547)</p>
</li><li>
<p>Make Model.all in static_cache plugin accept a block (AlexWayfer, jeremyevans) (#1543)</p>
</li><li>
<p>Add constant_sql_override extension for overriding SQL used for constants such as CURRENT_TIMESTAMP (celsworth) (#1538)</p>
</li><li>
<p>Do not cache from_self datasets if options are given (jeremyevans)</p>
</li></ul>

<h3 id="label-5.12.0+-282018-08-31-29">5.12.0 (2018-08-31)<span><a href="#label-5.12.0+-282018-08-31-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Make constraint_validations extension respect Database#constraint_validations_table setting (jeremyevans)</p>
</li><li>
<p>Make <a href="../classes/Sequel.html#method-c-extension"><code>Sequel.extension</code></a> load files from gems (jeremyevans)</p>
</li><li>
<p>Map clob prepared statement argument type to OCI8::CLOB in the oracle adapter (pipistrellka) (#1534)</p>
</li><li>
<p>Make Model.load_cache public in the static_cache plugin (AlexWayfer) (#1533)</p>
</li><li>
<p>Enable support for NOWAIT on MariaDB 10.3+ (jeremyevans)</p>
</li><li>
<p>Enable support for INTERSECT and EXCEPT on MariaDB 10.3+ (jeremyevans)</p>
</li><li>
<p>Make tactical_eager_loading plugin handle automatic eager loading for associated objects created by eager_graph (jeremyevans)</p>
</li><li>
<p>Cache eager_graph loader to speed up subsequent loads from the same dataset (jeremyevans)</p>
</li><li>
<p>Add caller_logging database extension to log callers before queries, useful during development (jeremyevans)</p>
</li><li>
<p>Add Database#call_procedure in the postgres adapter for calling PostgreSQL 11+ procedures (jeremyevans)</p>
</li><li>
<p>Add eager_graph_eager plugin for chaining eager association loads after eager_graph association loads (jeremyevans)</p>
</li><li>
<p>Support using Dataset#eager_graph in eager load callback for associations using join tables (jeremyevans)</p>
</li><li>
<p>Make Dataset#graph handle existing selections without determinable aliases by forcing a subselect (jeremyevans)</p>
</li><li>
<p>Freeze prepared statement arguments before returning the prepared statement (jeremyevans)</p>
</li><li>
<p>Refactor emulated prepared statement internals to use a placeholder literalizer (jeremyevans)</p>
</li></ul>

<h3 id="label-5.11.0+-282018-08-01-29">5.11.0 (2018-08-01)<span><a href="#label-5.11.0+-282018-08-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Fix using the jdbc/sqlserver adapter on JRuby 9.2+ (jeremyevans)</p>
</li><li>
<p>Fix dumping schema for numeric/decimal columns with default values, broken starting in 5.9.0 (jeremyevans)</p>
</li><li>
<p>Recognize additional check constraint violations on certain versions of SQLite (jeremyevans)</p>
</li><li>
<p>Use cached model instances for Model.first calls without an argument or with a single integer argument in the static_cache plugin (AlexWayfer) (#1529)</p>
</li><li>
<p>Support ON CONFLICT clause for INSERT on SQLite 3.24+ (jeremyevans)</p>
</li><li>
<p>Support Dataset#window for WINDOW clause on MySQL 8 and SQLAnywhere (jeremyevans)</p>
</li><li>
<p>Enable window function support on SQLAnywhere (jeremyevans)</p>
</li><li>
<p>Support using a hash as a window function :frame option value, with support for ROWS/RANGE/GROUPS, numeric offsets, and EXCLUDE (jeremyevans)</p>
</li><li>
<p>Allow using set_column_default with a nil value to remove the default value for a column on MySQL when the column is NOT NULL (jeremyevans)</p>
</li></ul>

<h3 id="label-5.10.0+-282018-07-01-29">5.10.0 (2018-07-01)<span><a href="#label-5.10.0+-282018-07-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Use input type casts when using the postgres adapter with pg 0.18+ to reduce string allocations for some primitive types used as prepared statement arguments (jeremyevans)</p>
</li><li>
<p>Assume local time if database timezone not specified when handling BC timestamps on JRuby 9.2.0.0 in the pg_extended_date_support extension (jeremyevans)</p>
</li><li>
<p>Fix parsing of timetz types in the jdbc/postgresql adapter (jeremyevans)</p>
</li><li>
<p>Make SQLTime.parse respect SQLTime.date and Sequel.application_timezone (jeremyevans)</p>
</li><li>
<p>Add :top as an option in the list plugin (celsworth) (#1526)</p>
</li><li>
<p>Fix Model#{ancestors,descendants,self_and_siblings} in the tree plugin when custom parent/children association names are used (jeremyevans) (#1525)</p>
</li><li>
<p>Treat read-only mode error as disconnect error on mysql and mysql2 adapters, for better behavior on AWS Aurora cluster (jeremyevans)</p>
</li><li>
<p>Don&#39;t use cached placeholder literalizers for in Dataset#{first,where_all,where_each,where_single_value} if argument is empty array or hash (jeremyevans)</p>
</li><li>
<p>Support :tablespace option when adding tables, indexes, and materialized views on PostgreSQL (jeremyevans)</p>
</li><li>
<p>Support :include option for indexes on PostgreSQL 11+ (jeremyevans)</p>
</li><li>
<p>Allow the use of IN/NOT IN operators with set returning functions for <a href="../classes/Sequel/Model.html"><code>Sequel::Model</code></a> datasets (jeremyevans)</p>
</li><li>
<p>Make many_to_pg_array associations in the pg_array_associations plugin work on PostgreSQL 11 (jeremyevans)</p>
</li><li>
<p>Only load strscan library in pg_array extension if it is needed (jeremyevans)</p>
</li><li>
<p>Don&#39;t remove related many_to_one associations from cache when setting column value to existing value for model instances that have not been persisted (jeremyevans) (#1521)</p>
</li><li>
<p>Support ruby 2.6+ endless ranges in the pg_range extension (jeremyevans)</p>
</li><li>
<p>Support ruby 2.6+ endless ranges in filters, using just a &gt;= operator for them (jeremyevans)</p>
</li></ul>

<h3 id="label-5.9.0+-282018-06-01-29">5.9.0 (2018-06-01)<span><a href="#label-5.9.0+-282018-06-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Support generated columns on MySQL 5.7+ and MariaDB 5.2+ (wjordan, jeremyevans) (#1517)</p>
</li><li>
<p>Add escaped_like extension for creation of LIKE expressions with placeholders in the pattern without access to a dataset (jeremyevans)</p>
</li><li>
<p>Modify jdbc adapter exception handling to work around ::NativeException deprecation in JRuby 9.2 (jeremyevans)</p>
</li><li>
<p>Work around broken BC date handling in JRuby 9.2.0.0 (jeremyevans)</p>
</li><li>
<p>Switch use of BigDecimal.new() to BigDecimal(), since the former is deprecated (jeremyevans)</p>
</li><li>
<p>Add Sequel::VERSION_NUMBER for easier version comparisons (jeremyevans)</p>
</li><li>
<p>Add Model.has_dataset? to determine if the model class has a dataset (AlexWayfer) (#1508)</p>
</li><li>
<p>Support use of LIKE with ANY function on PostgreSQL by avoiding unnecessary use of ESCAPE syntax (jeremyevans)</p>
</li><li>
<p>Disconnect connections left allocated by dead threads instead of returning the connections to the pool (jeremyevans)</p>
</li><li>
<p>Make both threaded connection pools avoid disconnecting connections while holding the connection pool mutex (jeremyevans)</p>
</li><li>
<p>Don&#39;t deadlock when disconnecting connections in the sharded_threaded connection pool when using connection_validator or connection_expiration extensions (jeremyevans)</p>
</li><li>
<p>Don&#39;t modify hash argument passed in Model.nested_attributes in the nested_attributes plugin (jeremyevans)</p>
</li><li>
<p>Avoid unnecessary hash creation in many places (jeremyevans)</p>
</li><li>
<p>Fix duplicate objects in nested associations when eager_graphing cascaded many_to_one=&gt;one_to_many associations (jeremyevans)</p>
</li></ul>

<h3 id="label-5.8.0+-282018-05-01-29">5.8.0 (2018-05-01)<span><a href="#label-5.8.0+-282018-05-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Don&#39;t mark SQLAnywhere as supporting WITH in INSERT statement (jeremyevans)</p>
</li><li>
<p>Support :search_path as a shard option on PostgreSQL (jeremyevans)</p>
</li><li>
<p>Add Dataset#nowait for raising a Sequel::DatabaseLockTimeout when a locked row is encountered, supported on PostgreSQL, MySQL 8+, MSSQL, and Oracle (jeremyevans)</p>
</li><li>
<p>Support Dataset#skip_locked on MySQL 8+ (jeremyevans)</p>
</li><li>
<p>Make schema modification methods in the pg_enum extension work on a frozen Database object (jeremyevans)</p>
</li><li>
<p>Support common table expressions and window functions on MySQL 8+ (jeremyevans)</p>
</li><li>
<p>Ignore Dataset#explain :extended option on MySQL 5.7+, since extended output is then the MySQL default (jeremyevans)</p>
</li><li>
<p>Work around REGEXP BINARY not working correctly on MySQL 8+ by using REGEXP_LIKE with the &#39;c&#39; match_type (jeremyevans)</p>
</li><li>
<p>Force correct column order in Database#foreign_key_list on MySQL (jeremyevans)</p>
</li><li>
<p>Add ConnectionPool#connection_expiration_random_delay to connection_expiration extension, to avoid thundering herd if preallocating connections (hex2a, jeremyevans) (#1503)</p>
</li><li>
<p>Emit deprecation warning in association_proxies plugin if using filter on an association proxy, since behavior will change on ruby 2.6+ (utilum) (#1497)</p>
</li><li>
<p>Handle multiple add_constraint calls and a set_column_null call in the same alter_table block on SQLite (jeremyevans) (#1498)</p>
</li><li>
<p>Add Database#rename_enum to the pg_enum extension (AlexWayfer) (#1495)</p>
</li><li>
<p>Make tactical_eager_loading plugin respect the :allow_eager association option (jeremyevans) (#1494)</p>
</li><li>
<p>Add pg_auto_constraint_validations plugin, for automatically converting constraint violations to validation failures on PostgreSQL (jeremyevans)</p>
</li><li>
<p>Don&#39;t make Model#_valid? public in the error_splitter plugin (jeremyevans)</p>
</li><li>
<p>Support Database#indexes :include_partial option on PostgreSQL for including partial indexes (jeremyevans)</p>
</li><li>
<p>Include more diagnostic information in Database#error_info on PostgreSQL (jeremyevans)</p>
</li><li>
<p>Support Database#foreign_key_list :reverse option on PostgreSQL for parsing foreign key constraints that reference a given table (jeremyevans)</p>
</li><li>
<p>Add Database#check_constraints on PostgreSQL for parsing CHECK constraints (jeremyevans)</p>
</li><li>
<p>Don&#39;t use identity columns if :serial=&gt;true or :type=&gt;:serial|:bigserial column options are used (#1490) (jeremyevans)</p>
</li><li>
<p>Cache Dataset#select_all datasets if no arguments are given (jeremyevans)</p>
</li><li>
<p>Cache Dataset#returning datasets if no arguments are given (jeremyevans)</p>
</li><li>
<p>Cache Dataset#qualify datasets if no argument is given (jeremyevans)</p>
</li><li>
<p>Cache Dataset#lateral datasets (jeremyevans)</p>
</li><li>
<p>Cache Dataset#from_self datasets if no options are given (jeremyevans)</p>
</li><li>
<p>Cache Dataset#distinct datasets if no arguments or block is given (jeremyevans)</p>
</li></ul>

<h3 id="label-5.7.0+-282018-04-01-29">5.7.0 (2018-04-01)<span><a href="#label-5.7.0+-282018-04-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Add <a href="../classes/Sequel.html#method-c-start_timer"><code>Sequel.start_timer</code></a> and .elapsed_seconds_since for more accurate elapsed time calculations on ruby 2.1+ (jeremyevans)</p>
</li><li>
<p>Run Dataset#with_sql_{all,each,first,single_value} using a cached dataset to avoid clobbering the dataset&#39;s columns (jeremyevans)</p>
</li><li>
<p>Add Database#convert_serial_to_identity on PostgreSQL 10.2+, which requires superuser access (jeremyevans)</p>
</li><li>
<p>Fix Database#server_version when connecting to PostgreSQL 10.1+ in certain cases (jeremyevans)</p>
</li><li>
<p>Free temporary clobs in the jdbc/oracle adapter to prevent a memory leak (jeremyevans) (#1482)</p>
</li><li>
<p>Treat prepared statement errors due to changing types as disconnect errors in the postgres adapter (jeremyevans) (#1481)</p>
</li><li>
<p>Add integer64 extension for treating Integer as a 64-bit integer when used as a generic type (jeremyevans)</p>
</li><li>
<p>Allow many_to_pg_array remove_all_* method cast appropriately to work correctly for non-integer types (jeremyevans)</p>
</li><li>
<p>Fix array_type for pg_array_to_many and many_to_pg_array associations in pg_array_associations plugin (jeremyevans)</p>
</li><li>
<p>Use identity columns instead of serial columns for primary keys on PostgreSQL 10.2+ (jeremyevans)</p>
</li><li>
<p>Support :identity option when creating columns on PostgreSQL 10+ to create identity columns (jeremyevans)</p>
</li><li>
<p>Add Dataset#overriding_{system,user}_value on PostgreSQL for use with PostgreSQL 10+ identity columns (jeremyevans)</p>
</li><li>
<p>Set :auto_increment schema entry correctly for PostgreSQL 10+ identity columns (jeremyevans)</p>
</li></ul>

<h3 id="label-5.6.0+-282018-03-01-29">5.6.0 (2018-03-01)<span><a href="#label-5.6.0+-282018-03-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Dedup :db_type strings in schema hashes on Ruby 2.5+ (jeremyevans)</p>
</li><li>
<p>Make schema_caching extension work with :callable_default schema values (jeremyevans)</p>
</li><li>
<p>Freeze string valuse in hashes returned by Database#schema when using the schema_caching extension (jeremyevans)</p>
</li><li>
<p>Protect migration file loading with a mutex to not break when multiple threads load migration files simultaneously (jeremyevans)</p>
</li><li>
<p>Respect identifier mangling rules when renaming columns on Microsoft SQL Server (jeremyevans)</p>
</li></ul>

<h3 id="label-5.5.0+-282018-01-31-29">5.5.0 (2018-01-31)<span><a href="#label-5.5.0+-282018-01-31-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Make Database#copy_table in the postgres adapter handle errors that occur while processing rows (jeremyevans) (#1470)</p>
</li><li>
<p>Cache results of changed_columns method in local variables in many places for better performance (jeremyevans)</p>
</li><li>
<p>Make modification_detection plugin not break column change detection for new objects (jeremyevans) (#1468)</p>
</li><li>
<p>Make pg_range extension set :ruby_default schema value for recognized range defaults (jeremyevans)</p>
</li><li>
<p>Make pg_interval extension set :ruby_default schema value for recognized interval defaults (jeremyevans)</p>
</li><li>
<p>Make pg_json extension set :callable_default schema value for empty json/jsonb array/hash defaults (jeremyevans)</p>
</li><li>
<p>Make pg_inet extension set :ruby_default schema value for recognized inet/cidr defaults (jeremyevans)</p>
</li><li>
<p>Make pg_hstore extension set :callable_default schema value for empty hstore defaults (jeremyevans)</p>
</li><li>
<p>Make pg_array extension set :callable_default schema value for recognized empty array defaults (jeremyevans) (#1466)</p>
</li><li>
<p>Make defaults_setter plugin prefer :callable_default db_schema values over :ruby_default db_schema values (jeremyevans)</p>
</li><li>
<p>Add defaults_setter plugin :cache option for caching default values returned (jeremyevans)</p>
</li><li>
<p>Freeze string values in hashes returned by Database#schema (jeremyevans)</p>
</li></ul>

<h3 id="label-5.4.0+-282018-01-04-29">5.4.0 (2018-01-04)<span><a href="#label-5.4.0+-282018-01-04-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Enable fractional seconds in timestamps on DB2 (jeremyevans) (#1463)</p>
</li><li>
<p>Don&#39;t attempt to insert a second time if insert_select runs a query that doesn&#39;t return results, which can happen when triggers are used (jeremyevans)</p>
</li><li>
<p>Make Dataset#insert_select on PostgreSQL and MSSQL return false instead of nil if the INSERT query is sent to the database but returns no rows (jeremyevans)</p>
</li><li>
<p>Add index_caching extension for caching calls to Database#indexes (kenaniah, jeremyevans) (#1461)</p>
</li><li>
<p>Allow Database#indexes on SQLite, MSSQL, SQLAnywhere, and DB2 to handle SQL::Identifier values (jeremyevans)</p>
</li><li>
<p>Add pg_timestamptz extension for using timestamptz (timestamp with time zone) as the default timestamp type (jeremyevans)</p>
</li><li>
<p>Support Sequel.date_{add,sub} :cast option for setting cast type in date_arithmetic extension (jeremyevans)</p>
</li><li>
<p>Optimize Database#synchronize implementation on ruby 2.5+ (jeremyevans)</p>
</li><li>
<p>Add class_table_inheritance plugin :ignore_subclass_columns option (brianphillips) (#1459)</p>
</li><li>
<p>Make Dataset#to_xml in xml_serializer work with eager_graphed datasets (jeremyevans)</p>
</li><li>
<p>Make Dataset#to_json in json_serializer work with eager_graphed datasets (jeremyevans)</p>
</li><li>
<p>Cache Dataset#nullify dataset in the null_dataset extension (chanks) (#1456)</p>
</li><li>
<p>Add datetime_parse_to_time extension, for parsing timestamp strings without offsets using DateTime.parse.to_time (jeremyevans) (#1455)</p>
</li><li>
<p>Add WHERE NULL filter for Dataset#where calls with no existing filter, no argument, and where the virtual row block returns nil (jeremyevans)</p>
</li></ul>

<h3 id="label-5.3.0+-282017-12-01-29">5.3.0 (2017-12-01)<span><a href="#label-5.3.0+-282017-12-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Add logger to Database instance before making first connection in bin/sequel (jeremyevans)</p>
</li><li>
<p>Drop support for PostgreSQL &lt;8.1 in Database#indexes (jeremyevans)</p>
</li><li>
<p>Add synchronize_sql extension, for checking out a connection around SQL generation (KJTsanaktsidis, jeremyevans) (#1451)</p>
</li><li>
<p>Deprecate Dataset#where calls with no existing filter, no argument, and where the virtual row block returns nil (jeremyevans) (#1454)</p>
</li><li>
<p>Add DatasetModule#reverse for simpler use of descending orders (jeremyevans)</p>
</li><li>
<p>Support WITH clauses in subqueries on SQLite, but not in UNION/INTERSECT/EXCEPT (jeremyevans)</p>
</li><li>
<p>Hoist WITH clauses to INSERT statement level if INSERT subquery uses a CTE on MSSQL (jeremyevans)</p>
</li><li>
<p>Respect indislive and ignore indcheckxmin index attributes when using Database#indexes on PostgreSQL (jeremyevans)</p>
</li><li>
<p>Explicitly disallow use of server-side prepared statements when using Dataset#call in the jdbc/postgresql adapter (jeremyevans) (#1448)</p>
</li><li>
<p>Support common table expressions, window functions, dropping CHECK constraints, and recognizing CURRENT_DATE defaults on MariaDB 10.2+ (jeremyevans)</p>
</li><li>
<p>Make Database#reset_primary_key_sequence work on PostgreSQL 10+ (jeremyevans)</p>
</li><li>
<p>Support :connect_sqls Database option for easily issuing sql commands on all new connections (jeremyevans)</p>
</li><li>
<p>Support :extensions Database option for loading extensions when initializing, useful in connection strings (jeremyevans)</p>
</li><li>
<p>Avoid warning if trying to rollback after a commit or rollback raises an exception in the postgres adapter (jeremyevans)</p>
</li><li>
<p>Support Date::Infinity values in the pg_extended_date_support extension (jeremyevans)</p>
</li></ul>

<h3 id="label-5.2.0+-282017-10-27-29">5.2.0 (2017-10-27)<span><a href="#label-5.2.0+-282017-10-27-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Fix type conversion for smallint unsigned and integer unsigned types on jdbc/mysql (jeremyevans) (#1443)</p>
</li><li>
<p>Add pg_extended_date_support extension, for handling infinite and BC dates/timestamps (jeremyevans)</p>
</li><li>
<p>Do not ignore existing @dataset instance variable when subclassing <a href="../classes/Sequel/Model.html"><code>Sequel::Model</code></a> (bjmllr) (#1435)</p>
</li></ul>

<h3 id="label-5.1.0+-282017-10-01-29">5.1.0 (2017-10-01)<span><a href="#label-5.1.0+-282017-10-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Make jdbc/h2 and jdbc/hsqldb adapters respect :foreign_key_constraint_name option when adding new foreign key column (jeremyevans)</p>
</li><li>
<p>Do not issue unnecessary query for macaddr type oid when loading the pg_inet extension (jeltz) (#1423)</p>
</li><li>
<p>Make alter_table add_foreign_key with a column symbol reversible when using the :foreign_key_constraint_name option (jeremyevans) (#1422)</p>
</li><li>
<p>Do not raise an error if calling Model.freeze on a frozen model (jeremyevans) (#1421)</p>
</li><li>
<p>Make Database#copy_into in the jdbc/postgresql adapter handle multi-byte strings (ckoenig) (#1416)</p>
</li><li>
<p>Remove deprecated Model use_after_commit_rollback class and instance methods (jeremyevans)</p>
</li><li>
<p>Remove deprecated Model.allowed_columns method in the base model support (jeremyevans)</p>
</li><li>
<p>Remove deprecated Model.plugin_module_defined? private method (jeremyevans)</p>
</li><li>
<p>Remove deprecated support for Model#_before_validation private method (jeremyevans)</p>
</li></ul>

<h3 id="label-5.0.0+-282017-09-01-29">5.0.0 (2017-09-01)<span><a href="#label-5.0.0+-282017-09-01-29">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p>Make bin/sequel -M option always use base 10 (jeremyevans)</p>
</li><li>
<p>Don&#39;t use savepoints when creating indexes inside a transaction on databases that don&#39;t support transactional schema modifications (jeremyevans) (#1407)</p>
</li><li>
<p>Support :if_not_exists option when creating indexes on PostgreSQL 9.5+ (DyegoCosta) (#1405)</p>
</li><li>
<p>Make threaded connection pools not block while connections are being made (jeremyevans)</p>
</li><li>
<p>SQL::Expression#clone and dup now return self, since all expressions should be frozen value objects (jeremyevans)</p>
</li><li>
<p>Don&#39;t create empty arrays for unused association callbacks (jeremyevans)</p>
</li><li>
<p>Cache association method name symbols instead of recomputing them everytime (jeremyevans)</p>
</li><li>
<p>Raise an exception if attempting to create a prepared statement using a dataset with a delayed evaluation (jeremyevans)</p>
</li><li>
<p>Make ConnectionPool#size thread safe by using the pool mutex (jeremyevans)</p>
</li><li>
<p>Use instance_exec instead of instance_eval when passing a block, to work with lambdas that accept no arguments (jeremyevans)</p>
</li><li>
<p>Freeze SQL::StringAgg instances in string_agg extension (jeremyevans)</p>
</li><li>
<p>Freeze SQL::DateAdd instances in date_arithmetic extension (jeremyevans)</p>
</li><li>
<p>Freeze SQL::Expression.comparison_attrs (jeremyevans)</p>
</li><li>
<p>Rename SQL::Subscript#f to expression, keeping f as an alias (jeremyevans)</p>
</li><li>
<p>Require the :pool_class Database option be a class to use a custom connection pool (jeremyevans)</p>
</li><li>
<p>Make the class_table_inheritance plugin raise an Error during update if any UPDATE query does not affect a single row (jeremyevans)</p>
</li><li>
<p>Change most send calls to public_send unless calling private methods is expected (jeremyevans)</p>
</li><li>
<p>Database schema and schema generator methods now return nil (jeremyevans)</p>
</li><li>
<p>Model#validates_unique in the validation helpers plugin now defaults to only checking on new or modified values (jeremyevans)</p>
</li><li>
<p>Deprecate Model#_before_validation (private_method), use Model#before_validation now (jeremyevans)</p>
</li><li>
<p>Always run before/after/around validation hooks when saving, even when not validating the object (jeremyevans)</p>
</li><li>
<p>Deprecate Model use_after_commit_rollback class and instance accessors (jeremyevans)</p>
</li><li>
<p>Deprecate Model.allowed_columns reader (jeremyevans)</p>
</li><li>
<p>Freeze internal constants that shouldn&#39;t be modified at runtime (jeremyevans)</p>
</li><li>
<p>Attempt to connect to the database immediately when creating the Database instance (jeremyevans)</p>
</li><li>
<p>Make association_pks plugin delay the setting of associated objects until the current object is saved by default (jeremyevans)</p>
</li><li>
<p>Joined datasets used as model datasets are now automatically wrapped in a subquery (jeremyevans)</p>
</li><li>
<p>Setting an invalid dataset for a model class now raises an exception by default (jeremyevans)</p>
</li><li>
<p>Getting all values for newly created models now happens before calling after_create, instead of after (jeremyevans)</p>
</li><li>
<p>Remove use of @was_new/@columns_updated instance variables when saving model objects (jeremyevans)</p>
</li><li>
<p>Disable symbol splitting by default (jeremyevans)</p>
</li><li>
<p>Make datasets frozen by default (jeremyevans)</p>
</li><li>
<p>Drop support for ruby 1.8.7, minimum now is 1.9.2 (jeremyevans) </p>
</li><li>
<p>Remove deprecated adapters, extensions, plugins, constants, and features (jeremyevans)</p>
</li></ul>

<h3 id="label-Older">Older<span><a href="#label-Older">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>See <a href="doc/CHANGELOG_old.html">doc/CHANGELOG.old</a></p>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/rdoc/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
